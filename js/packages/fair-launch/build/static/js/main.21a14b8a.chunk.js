(this["webpackJsonpcandy-machine-mint"]=this["webpackJsonpcandy-machine-mint"]||[]).push([[0],{112:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return g})),n.d(t,"d",(function(){return x}));var r=n(13),a=n(4),i=n(1),c=n.n(i),o=n(21),s=n(29),u=n(7),l=n(189),d=n(25),b=new o.e.PublicKey("cndy3Z4yapfJBmL3ShUp5exZKqR3z33thTzeNMm2gRZ"),p=new o.e.PublicKey("metaqbxxUerdq28cj1RbAWkYQm3ybzjb6a8bt518x1s"),f=function(){var e=Object(a.a)(c.a.mark((function e(t,n,r){var i,o,s,u,l=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l.length>3&&void 0!==l[3]?l[3]:"recent",i=l.length>4&&void 0!==l[4]&&l[4],o=!1,s={slot:0,confirmations:0,err:null},u=0,e.next=7,new Promise(function(){var e=Object(a.a)(c.a.mark((function e(u,l){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:setTimeout((function(){o||(o=!0,console.log("Rejecting for timeout..."),l({timeout:!0}))}),n);case 1:if(o||!i){e.next=7;break}return Object(a.a)(c.a.mark((function e(){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.getSignatureStatuses([t]);case 3:n=e.sent,s=n&&n.value[0],o||(s?s.err?(console.log("REST error for",t,s),o=!0,l(s.err)):s.confirmations?(console.log("REST confirmation for",t,s),o=!0,u(s)):console.log("REST no confirmations for",t,s):console.log("REST null result for",t,s)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),o||console.log("REST connection error: txid",t,e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))(),e.next=5,y(2e3);case 5:e.next=1;break;case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 7:return s=e.sent,r._signatureSubscriptions[u]&&r.removeSignatureListener(u),o=!0,console.log("Returning status",s),e.abrupt("return",s);case 12:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),h=function(t,n,r,a){var i=[{pubkey:n,isSigner:!0,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!1},{pubkey:a,isSigner:!1,isWritable:!1},{pubkey:o.e.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:s.b,isSigner:!1,isWritable:!1},{pubkey:o.e.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}];return new o.e.TransactionInstruction({keys:i,programId:d.b,data:e.from([])})},g=function(){var e=Object(a.a)(c.a.mark((function e(t,n,r){var a,i,s,u,l,d,p;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new o.c(r,t,{preflightCommitment:"recent"}),e.next=3,o.b.fetchIdl(b,a);case 3:return i=e.sent,s=new o.b(i,b,a),e.next=7,s.account.candyMachine.fetch(n);case 7:return u=e.sent,l=u.data.itemsAvailable.toNumber(),d=u.itemsRedeemed.toNumber(),p=l-d,e.abrupt("return",{id:n,program:s,state:{itemsAvailable:l,itemsRedeemed:d,itemsRemaining:p,isSoldOut:0===p,isActive:u.data.goLiveDate.toNumber()<(new Date).getTime()/1e3&&(!u.endSettings||(u.endSettings.endSettingType.date?u.endSettings.number.toNumber()>(new Date).getTime()/1e3:d<u.endSettings.number.toNumber())),goLiveDate:u.data.goLiveDate,treasury:u.wallet,tokenMint:u.tokenMint,gatekeeper:u.data.gatekeeper,endSettings:u.data.endSettings,whitelistMintSettings:u.data.whitelistMintSettings,hiddenSettings:u.data.hiddenSettings,price:u.data.price}});case 12:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),m=function(){var t=Object(a.a)(c.a.mark((function t(n){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.e.PublicKey.findProgramAddress([e.from("metadata"),p.toBuffer(),n.toBuffer(),e.from("edition")],p);case 2:return t.abrupt("return",t.sent[0]);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),v=function(){var t=Object(a.a)(c.a.mark((function t(n){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.e.PublicKey.findProgramAddress([e.from("metadata"),p.toBuffer(),n.toBuffer()],p);case 2:return t.abrupt("return",t.sent[0]);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),j=function(){var t=Object(a.a)(c.a.mark((function t(n){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.e.PublicKey.findProgramAddress([e.from("candy_machine"),n.toBuffer()],b);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),x=function(){var e=Object(a.a)(c.a.mark((function e(t,n){var a,i,b,f,g,x,y,O,k,S,w,P,T,R,A,L,_,E;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.e.Keypair.generate(),e.next=3,Object(d.e)(a.publicKey,n);case 3:if(i=e.sent[0],!t.state.tokenMint){e.next=10;break}return e.next=7,Object(d.e)(t.state.tokenMint,n);case 7:e.t0=e.sent[0],e.next=11;break;case 10:e.t0=n;case 11:return b=e.t0,f=t.id,g=[],x=[a],y=[],e.t1=o.e.SystemProgram,e.t2=n,e.t3=a.publicKey,e.t4=s.a.span,e.next=22,t.program.provider.connection.getMinimumBalanceForRentExemption(s.a.span);case 22:if(e.t5=e.sent,e.t6=s.b,e.t7={fromPubkey:e.t2,newAccountPubkey:e.t3,space:e.t4,lamports:e.t5,programId:e.t6},e.t8=e.t1.createAccount.call(e.t1,e.t7),e.t9=s.c.createInitMintInstruction(s.b,a.publicKey,0,n,n),e.t10=h(i,n,n,a.publicKey),e.t11=s.c.createMintToInstruction(s.b,a.publicKey,i,n,[],1),O=[e.t8,e.t9,e.t10,e.t11],!t.state.gatekeeper){e.next=45;break}return e.t12=g,e.next=34,Object(d.h)(n,t.state.gatekeeper.gatekeeperNetwork);case 34:if(e.t13=e.sent[0],e.t14={pubkey:e.t13,isWritable:!0,isSigner:!1},e.t12.push.call(e.t12,e.t14),!t.state.gatekeeper.expireOnUse){e.next=45;break}return g.push({pubkey:d.a,isWritable:!1,isSigner:!1}),e.t15=g,e.next=42,Object(d.g)(t.state.gatekeeper.gatekeeperNetwork);case 42:e.t16=e.sent[0],e.t17={pubkey:e.t16,isWritable:!1,isSigner:!1},e.t15.push.call(e.t15,e.t17);case 45:if(!t.state.whitelistMintSettings){e.next=60;break}return k=new o.e.PublicKey(t.state.whitelistMintSettings.mint),e.next=49,Object(d.e)(k,n);case 49:if(S=e.sent[0],g.push({pubkey:S,isWritable:!0,isSigner:!1}),!t.state.whitelistMintSettings.mode.burnEveryTime){e.next=60;break}return w=o.e.Keypair.generate(),g.push({pubkey:k,isWritable:!0,isSigner:!1}),g.push({pubkey:w.publicKey,isWritable:!1,isSigner:!0}),x.push(w),e.next=58,t.program.provider.connection.getAccountInfo(S);case 58:e.sent&&(O.push(s.c.createApproveInstruction(s.b,S,w.publicKey,n,[],1)),y.push(s.c.createRevokeInstruction(s.b,S,n,[])));case 60:return t.state.tokenMint&&(P=o.e.Keypair.generate(),x.push(P),g.push({pubkey:b,isWritable:!0,isSigner:!1}),g.push({pubkey:P.publicKey,isWritable:!1,isSigner:!0}),O.push(s.c.createApproveInstruction(s.b,b,P.publicKey,n,[],t.state.price.toNumber())),y.push(s.c.createRevokeInstruction(s.b,b,n,[]))),e.next=63,v(a.publicKey);case 63:return T=e.sent,e.next=66,m(a.publicKey);case 66:return R=e.sent,e.next=69,j(f);case 69:return A=e.sent,L=Object(r.a)(A,2),_=L[0],E=L[1],e.t18=O,e.next=76,t.program.instruction.mintNft(E,{accounts:{candyMachine:f,candyMachineCreator:_,payer:n,wallet:t.state.treasury,mint:a.publicKey,metadata:T,masterEdition:R,mintAuthority:n,updateAuthority:n,tokenMetadataProgram:p,tokenProgram:s.b,systemProgram:u.SystemProgram.programId,rent:o.e.SYSVAR_RENT_PUBKEY,clock:o.e.SYSVAR_CLOCK_PUBKEY,recentBlockhashes:o.e.SYSVAR_RECENT_BLOCKHASHES_PUBKEY,instructionSysvarAccount:o.e.SYSVAR_INSTRUCTIONS_PUBKEY},remainingAccounts:g.length>0?g:void 0});case 76:return e.t19=e.sent,e.t18.push.call(e.t18,e.t19),e.prev=78,e.next=81,Object(l.a)(t.program.provider.connection,t.program.provider.wallet,[O,y],[x,[]]);case 81:return e.abrupt("return",e.sent.txs.map((function(e){return e.txid})));case 84:e.prev=84,e.t20=e.catch(78),console.log(e.t20);case 87:return e.abrupt("return",[]);case 88:case"end":return e.stop()}}),e,null,[[78,84]])})));return function(t,n){return e.apply(this,arguments)}}(),y=function(e){return new Promise((function(t){return setTimeout(t,e)}))}}).call(this,n(15).Buffer)},189:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r,a=n(17),i=n(4),c=n(1),o=n.n(c),s=n(7),u=n(103);!function(e){e[e.Sequential=0]="Sequential",e[e.Parallel=1]="Parallel",e[e.StopOnFailure=2]="StopOnFailure"}(r||(r={}));var l=function(){var e=Object(i.a)(o.a.mark((function e(t,n,i,c){var l,d,b,f,h,g,m,v,j,x,y,O,k,S,w=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=w.length>4&&void 0!==w[4]?w[4]:r.Parallel,d=w.length>5&&void 0!==w[5]?w[5]:"singleGossip",b=w.length>6&&void 0!==w[6]?w[6]:function(e,t){},f=w.length>7&&void 0!==w[7]?w[7]:function(e,t){return!1},h=w.length>8?w[8]:void 0,n.publicKey){e.next=7;break}throw new u.e;case 7:if(g=[],h){e.next=12;break}return e.next=11,t.getRecentBlockhash(d);case 11:h=e.sent;case 12:m=function(e){var t=i[e],r=c[e];if(0===t.length)return"continue";var o=new s.Transaction;t.forEach((function(e){return o.add(e)})),o.recentBlockhash=h.blockhash,o.setSigners.apply(o,[n.publicKey].concat(Object(a.a)(r.map((function(e){return e.publicKey}))))),r.length>0&&o.partialSign.apply(o,Object(a.a)(r)),g.push(o)},v=0;case 14:if(!(v<i.length)){e.next=21;break}if("continue"!==m(v)){e.next=18;break}return e.abrupt("continue",18);case 18:v++,e.next=14;break;case 21:return e.next=23,n.signAllTransactions(g);case 23:j=e.sent,x=[],y={breakEarly:!1,i:0},console.log("Signed txns length",j.length,"vs handed in length",i.length),O=o.a.mark((function e(n){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((a=p({connection:t,signedTransaction:j[n]})).then((function(e){var t=e.txid;e.slot;b(t,n)})).catch((function(e){f(j[n],n),l===r.StopOnFailure&&(y.breakEarly=!0,y.i=n)})),l===r.Parallel){e.next=21;break}return e.prev=3,e.next=6,a;case 6:e.next=19;break;case 8:if(e.prev=8,e.t0=e.catch(3),console.log("Caught failure",e.t0),!y.breakEarly){e.next=19;break}return console.log("Died on ",y.i),e.t1=y.i,e.next=16,Promise.all(x);case 16:return e.t2=e.sent,e.t3={number:e.t1,txs:e.t2},e.abrupt("return",{v:e.t3});case 19:e.next=22;break;case 21:x.push(a);case 22:case"end":return e.stop()}}),e,null,[[3,8]])})),k=0;case 29:if(!(k<j.length)){e.next=37;break}return e.delegateYield(O(k),"t0",31);case 31:if("object"!==typeof(S=e.t0)){e.next=34;break}return e.abrupt("return",S.v);case 34:k++,e.next=29;break;case 37:if(l===r.Parallel){e.next=40;break}return e.next=40,Promise.all(x);case 40:return e.t1=j.length,e.next=43,Promise.all(x);case 43:return e.t2=e.sent,e.abrupt("return",{number:e.t1,txs:e.t2});case 45:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),d=function(){return(new Date).getTime()/1e3},b=15e3;function p(e){return f.apply(this,arguments)}function f(){return(f=Object(i.a)(o.a.mark((function e(t){var n,r,a,c,s,u,l,p,f,g,v,x,y;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.signedTransaction,r=t.connection,a=t.timeout,c=void 0===a?b:a,s=n.serialize(),u=d(),l=0,e.next=6,r.sendRawTransaction(s,{skipPreflight:!0});case 6:return p=e.sent,console.log("Started awaiting confirmation for",p),f=!1,Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f||!(d()-u<c)){e.next=6;break}return r.sendRawTransaction(s,{skipPreflight:!0}),e.next=4,j(500);case 4:e.next=0;break;case 6:case"end":return e.stop()}}),e)})))(),e.prev=10,e.next=13,m(p,c,r,"recent",!0);case 13:if(g=e.sent){e.next=16;break}throw new Error("Timed out awaiting confirmation on transaction");case 16:if(!g.err){e.next=19;break}throw console.error(g.err),new Error("Transaction failed: Custom instruction error");case 19:l=(null===g||void 0===g?void 0:g.slot)||0,e.next=47;break;case 22:if(e.prev=22,e.t0=e.catch(10),console.error("Timeout Error caught",e.t0),!e.t0.timeout){e.next=27;break}throw new Error("Timed out awaiting confirmation on transaction");case 27:return v=null,e.prev=28,e.next=31,h(r,n,"single");case 31:v=e.sent.value,e.next=36;break;case 34:e.prev=34,e.t1=e.catch(28);case 36:if(!v||!v.err){e.next=47;break}if(!v.logs){e.next=46;break}x=v.logs.length-1;case 39:if(!(x>=0)){e.next=46;break}if(!(y=v.logs[x]).startsWith("Program log: ")){e.next=43;break}throw new Error("Transaction failed: "+y.slice("Program log: ".length));case 43:--x,e.next=39;break;case 46:throw new Error(JSON.stringify(v.err));case 47:return e.prev=47,f=!0,e.finish(47);case 50:return console.log("Latency",p,d()-u),e.abrupt("return",{txid:p,slot:l});case 52:case"end":return e.stop()}}),e,null,[[10,22,47,50],[28,34]])})))).apply(this,arguments)}function h(e,t,n){return g.apply(this,arguments)}function g(){return(g=Object(i.a)(o.a.mark((function e(t,n,r){var a,i,c,s,u;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._recentBlockhash(t._disableBlockhashCaching);case 2:return n.recentBlockhash=e.sent,a=n.serializeMessage(),i=n._serialize(a),c=i.toString("base64"),s=[c,{encoding:"base64",commitment:r}],e.next=10,t._rpcRequest("simulateTransaction",s);case 10:if(!(u=e.sent).error){e.next=13;break}throw new Error("failed to simulate transaction: "+u.error.message);case 13:return e.abrupt("return",u.result);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e,t,n){return v.apply(this,arguments)}function v(){return v=Object(i.a)(o.a.mark((function e(t,n,r){var a,c,s,u,l,d=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=d.length>3&&void 0!==d[3]?d[3]:"recent",c=d.length>4&&void 0!==d[4]&&d[4],s=!1,u={slot:0,confirmations:0,err:null},l=0,e.next=7,new Promise(function(){var e=Object(i.a)(o.a.mark((function e(d,b){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:setTimeout((function(){s||(s=!0,console.log("Rejecting for timeout..."),b({timeout:!0}))}),n);try{l=r.onSignature(t,(function(e,t){s=!0,u={err:e.err,slot:t.slot,confirmations:0},e.err?(console.log("Rejected via websocket",e.err),b(u)):(console.log("Resolved via websocket",e),d(u))}),a)}catch(p){s=!0,console.error("WS error in setup",t,p)}case 2:if(s||!c){e.next=8;break}return Object(i.a)(o.a.mark((function e(){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.getSignatureStatuses([t]);case 3:n=e.sent,u=n&&n.value[0],s||(u?u.err?(console.log("REST error for",t,u),s=!0,b(u.err)):u.confirmations?(console.log("REST confirmation for",t,u),s=!0,d(u)):console.log("REST no confirmations for",t,u):console.log("REST null result for",t,u)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),s||console.log("REST connection error: txid",t,e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))(),e.next=6,j(2e3);case 6:e.next=2;break;case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 7:return u=e.sent,r._signatureSubscriptions[l]&&r.removeSignatureListener(l),s=!0,console.log("Returning status",u),e.abrupt("return",u);case 12:case"end":return e.stop()}}),e)}))),v.apply(this,arguments)}function j(e){return new Promise((function(t){return setTimeout(t,e)}))}},217:function(e,t,n){},218:function(e,t,n){},220:function(e,t){},223:function(e,t){},244:function(e,t){},245:function(e,t){},25:function(e,t,n){"use strict";(function(e){n.d(t,"i",(function(){return l})),n.d(t,"d",(function(){return b})),n.d(t,"b",(function(){return p})),n.d(t,"a",(function(){return f})),n.d(t,"f",(function(){return h})),n.d(t,"e",(function(){return g})),n.d(t,"g",(function(){return m})),n.d(t,"h",(function(){return v})),n.d(t,"c",(function(){return j}));var r=n(4),a=n(1),i=n.n(a),c=n(21),o=n(29),s=n(7),u=new c.e.PublicKey("faircnAB9k59Y4TXmLabBULeuTLgV7TkGMGNkjnA15j"),l=function(e){if(e)return new Date(1e3*e.toNumber())},d=new Intl.NumberFormat("en-US",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}),b={format:function(e){return e?d.format(e):"--"},asNumber:function(e){if(e)return e.toNumber()/s.LAMPORTS_PER_SOL}},p=new c.e.PublicKey("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"),f=new c.e.PublicKey("gatem74V238djXdzWnJf94Wo1DcnuGkfijbf3AuBhfs"),h=function(){var t=Object(r.a)(i.a.mark((function t(n,r){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.e.PublicKey.findProgramAddress([e.from("fair_launch"),n.toBuffer(),r.toArrayLike(e,"le",8)],u);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),g=function(){var e=Object(r.a)(i.a.mark((function e(t,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.e.PublicKey.findProgramAddress([n.toBuffer(),o.b.toBuffer(),t.toBuffer()],p);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),m=function(){var t=Object(r.a)(i.a.mark((function t(n){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.e.PublicKey.findProgramAddress([n.toBuffer(),e.from("expire")],f);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),v=function(){var t=Object(r.a)(i.a.mark((function t(n,r){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.e.PublicKey.findProgramAddress([n.toBuffer(),e.from("gateway"),e.from([0,0,0,0,0,0,0,0]),r.toBuffer()],f);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();function j(t,n,r,a){var i=[{pubkey:n,isSigner:!0,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!1},{pubkey:a,isSigner:!1,isWritable:!1},{pubkey:s.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:o.b,isSigner:!1,isWritable:!1},{pubkey:s.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}];return new s.TransactionInstruction({keys:i,programId:p,data:e.from([])})}}).call(this,n(15).Buffer)},282:function(e,t,n){"use strict";n.r(t);var r,a,i=n(0),c=n.n(i),o=n(33),s=n.n(o),u=(n(217),n(218),n(23)),l=n(17),d=n(4),b=n(13),p=n(63),f=n(1),h=n.n(f),g=n(54),m=n(330),v=n(316),j=n(321),x=n(315),y=n(317),O=n(312),k=n(326),S=n(309),w=n(200),P=n(318),T=n(329),R=n(61),A=n(328),L=n(311),_=n(313),E=n(135),M=n.n(E),C=n(323),N=n(7),K=n(182),B=n(138),D=n(112),W=n(94),I=n(25),F=n(307),Y=n(102),U=n(6),G=Object(g.a)(F.a)(r||(r=Object(p.a)(["\n  width: 100%;\n  height: 60px;\n  margin-top: 10px;\n  margin-bottom: 5px;\n  background: linear-gradient(180deg, #604ae5 0%, #813eee 100%);\n  color: white;\n  font-size: 16px;\n  font-weight: bold;\n"]))),H=function(e){var t,n,r,a,c=e.onMint,o=e.candyMachine,s=e.fairLaunch,u=e.isMinting,l=e.fairLaunchBalance,p=Object(Y.c)(),f=p.requestGatewayToken,g=p.gatewayStatus,m=Object(i.useState)(!1),v=Object(b.a)(m,2),j=v[0],y=v[1];return Object(i.useEffect)((function(){g===Y.b.ACTIVE&&j&&(console.log("Minting"),c(),y(!1))}),[g,j,y,c]),Object(U.jsx)(G,{disabled:(null===o||void 0===o?void 0:o.state.isSoldOut)||u||!(null!==o&&void 0!==o&&o.state.isActive)||(null===s||void 0===s||null===(t=s.ticket)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.state.punched)&&0===l,onClick:Object(d.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(y(!0),null===o||void 0===o||!o.state.isActive||null===o||void 0===o||!o.state.gatekeeper){e.next=10;break}if(g!==Y.b.ACTIVE){e.next=6;break}y(!0),e.next=8;break;case 6:return e.next=8,f();case 8:e.next=13;break;case 10:return e.next=12,c();case 12:y(!1);case 13:case"end":return e.stop()}}),e)}))),variant:"contained",children:null!==s&&void 0!==s&&null!==(r=s.ticket)&&void 0!==r&&null!==(a=r.data)&&void 0!==a&&a.state.punched&&0===l?"MINTED":null!==o&&void 0!==o&&o.state.isSoldOut?"SOLD OUT":u?Object(U.jsx)(x.a,{}):"SECURE MY RESERVATION"})},V=n(193),q=function(e){var t,n,r,a,c,o,s,u=e.fairLaunch,l=Object(b.a)(e.isMinting,2),p=l[0],f=l[1],g=e.anchorWallet,m=e.setAlertState,j=Object(i.useState)(!1),O=Object(b.a)(j,2),k=O[0],S=O[1],w=function(){var e=Object(d.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g){e.next=2;break}return e.abrupt("return");case 2:return console.log("refund"),e.prev=3,f(!0),e.next=7,Object(W.d)(g,u);case 7:f(!1),m({open:!0,message:"Congratulations! You have received a refund. This is an irreversible action.",severity:"success"}),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(3),console.log(e.t0),f(!1),m({open:!0,message:"Something went wrong.",severity:"error"});case 16:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(){return e.apply(this,arguments)}}();return Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(v.a,{maxWidth:"xs",style:{position:"relative"},children:Object(U.jsx)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"flex-end"},children:Object(U.jsx)(y.a,{component:"button",variant:"body2",color:"textSecondary",align:"right",onClick:function(){S(!0)},children:"Anti-Rug Policy"})})}),Object(U.jsx)(A.a,{open:k,onClose:function(){S(!1)},PaperProps:{style:{backgroundColor:"#222933",borderRadius:6}},children:Object(U.jsxs)(_.a,{style:{padding:24},children:[!u.state.data.antiRugSetting&&Object(U.jsx)("span",{children:"This Fair Launch has no anti-rug settings."}),u.state.data.antiRugSetting&&u.state.data.antiRugSetting.selfDestructDate&&Object(U.jsxs)("div",{children:[Object(U.jsx)("h3",{children:"Anti-Rug Policy"}),Object(U.jsx)("p",{children:"This raffle is governed by a smart contract to prevent the artist from running away with your money."}),Object(U.jsx)("p",{children:"How it works:"}),"This project will retain"," ",u.state.data.antiRugSetting.reserveBp/100,"% (\u25ce"," ",u.treasury*u.state.data.antiRugSetting.reserveBp/(1e4*N.LAMPORTS_PER_SOL),") of the pledged amount in a locked state until all but"," ",u.state.data.antiRugSetting.tokenRequirement.toNumber()," ","NFTs (out of up to"," ",u.state.data.numberOfTokens.toNumber(),") have been minted.",Object(U.jsxs)("p",{children:["If more than"," ",u.state.data.antiRugSetting.tokenRequirement.toNumber()," ","NFTs remain as of"," ",null===(t=Object(I.i)(u.state.data.antiRugSetting.selfDestructDate))||void 0===t?void 0:t.toLocaleDateString()," ","at"," ",null===(n=Object(I.i)(u.state.data.antiRugSetting.selfDestructDate))||void 0===n?void 0:n.toLocaleTimeString(),", you will have the option to get a refund of"," ",u.state.data.antiRugSetting.reserveBp/100,"% of the cost of your token."]}),(null===(r=u.ticket)||void 0===r?void 0:r.data)&&!(null!==(a=u.ticket)&&void 0!==a&&a.data.state.withdrawn)&&Object(U.jsx)(G,{onClick:w,variant:"contained",disabled:!u.ticket.data||!u.ticket.data.state.punched||Date.now()/1e3<u.state.data.antiRugSetting.selfDestructDate.toNumber(),children:p?Object(U.jsx)(x.a,{}):Date.now()/1e3<u.state.data.antiRugSetting.selfDestructDate.toNumber()?Object(U.jsxs)("span",{children:["Refund in...",Object(U.jsx)(V.a,{date:Object(I.i)(u.state.data.antiRugSetting.selfDestructDate)})]}):"Refund"}),Object(U.jsx)("div",{style:{textAlign:"center",marginTop:"-5px"},children:(null===(c=u.ticket)||void 0===c?void 0:c.data)&&!(null!==(o=u.ticket)&&void 0!==o&&null!==(s=o.data)&&void 0!==s&&s.state.punched)&&Object(U.jsx)("small",{children:"You currently have a ticket but it has not been punched yet, so cannot be refunded."})})]})]})})]})};function z(e,t){var n,r,i,c,o=(new Date).getTime(),s=null===(n=Object(I.i)(null===e||void 0===e?void 0:e.state.data.phaseOneStart))||void 0===n?void 0:n.getTime(),u=null===(r=Object(I.i)(null===e||void 0===e?void 0:e.state.data.phaseOneEnd))||void 0===r?void 0:r.getTime(),l=null===(i=Object(I.i)(null===e||void 0===e?void 0:e.state.data.phaseTwoEnd))||void 0===i?void 0:i.getTime(),d=null===(c=Object(I.i)(null===t||void 0===t?void 0:t.state.goLiveDate))||void 0===c?void 0:c.getTime();return s&&o<s?a.AnticipationPhase:u&&o<=u?a.SetPrice:l&&o<=l?a.GracePeriod:(null===e||void 0===e||!e.state.phaseThreeStarted)&&l&&o>l?a.Lottery:(!e||null!==e&&void 0!==e&&e.state.phaseThreeStarted)&&d&&o>d?a.Phase4:null!==e&&void 0!==e&&e.state.phaseThreeStarted?t?a.WaitForCM:a.RaffleFinished:a.Unknown}!function(e){e[e.AnticipationPhase=0]="AnticipationPhase",e[e.SetPrice=1]="SetPrice",e[e.GracePeriod=2]="GracePeriod",e[e.Lottery=3]="Lottery",e[e.RaffleFinished=4]="RaffleFinished",e[e.WaitForCM=5]="WaitForCM",e[e.Phase4=6]="Phase4",e[e.Unknown=7]="Unknown"}(a||(a={}));var X,J,Q=function(e){var t=e.phaseName,n=e.desc;e.date,e.status;return Object(U.jsx)(P.a,{container:!0,justifyContent:"center",children:Object(U.jsxs)(P.a,{xs:12,justifyContent:"center",direction:"column",children:[Object(U.jsx)(w.a,{variant:"h6",style:{fontWeight:600},children:t}),Object(U.jsx)(w.a,{variant:"body1",color:"textSecondary",children:n})]})})},Z=function(e){var t=e.phase,n=e.fairLaunch,r=e.candyMachine,i=(e.candyMachinePredatesFairLaunch,e.rpcUrl,Object(K.b)());return console.log("D",r),console.log("Wallet",i),Object(U.jsxs)(U.Fragment,{children:[t===a.AnticipationPhase&&Object(U.jsx)(Q,{phaseName:"Phase 0",desc:"Anticipation Phase",date:null===n||void 0===n?void 0:n.state.data.phaseOneStart}),t===a.SetPrice&&Object(U.jsx)(Q,{phaseName:"Phase 1",desc:"Set price phase",date:null===n||void 0===n?void 0:n.state.data.phaseOneEnd}),t===a.GracePeriod&&Object(U.jsx)(Q,{phaseName:"Phase 2",desc:"Grace period",date:null===n||void 0===n?void 0:n.state.data.phaseTwoEnd}),t===a.Lottery&&Object(U.jsx)(Q,{phaseName:"Phase 3",desc:"Raffle in progress",date:null===n||void 0===n?void 0:n.state.data.phaseTwoEnd.add(null===n||void 0===n?void 0:n.state.data.lotteryDuration)}),t===a.RaffleFinished&&Object(U.jsx)(Q,{phaseName:"Phase 3",desc:"Raffle finished!",date:null===n||void 0===n?void 0:n.state.data.phaseTwoEnd}),t===a.WaitForCM&&Object(U.jsx)(Q,{phaseName:"Phase 3",desc:"Minting starts in...",date:null===r||void 0===r?void 0:r.state.goLiveDate}),t===a.Unknown&&!r&&Object(U.jsx)(Q,{phaseName:"Loading...",desc:"Waiting for you to connect your wallet.",date:void 0}),t===a.Phase4&&Object(U.jsx)(Q,{phaseName:"NFT WHITELIST RESERVATION",desc:"0.25 SOL - NFT mint dates TBD",date:null===r||void 0===r?void 0:r.state.goLiveDate,status:"LIVE"})]})},$=Object(g.a)(B.a)(X||(X=Object(p.a)(["\n  width: 100%;\n  height: 60px;\n  margin-top: 10px;\n  margin-bottom: 5px;\n  background: linear-gradient(180deg, #604ae5 0%, #813eee 100%);\n  color: white;\n  font-size: 16px;\n  font-weight: bold;\n"]))),ee=g.a.div(J||(J=Object(p.a)([""]))),te=function(e){return Object(T.a)({root:{margin:0,padding:e.spacing(2)},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}})},ne=Object(g.a)(m.a)({color:"#C0D5FE",height:8,"& > *":{height:4},"& .MuiSlider-track":{border:"none",height:4},"& .MuiSlider-thumb":{height:24,width:24,marginTop:-10,background:"linear-gradient(180deg, #604AE5 0%, #813EEE 100%)",border:"2px solid currentColor","&:focus, &:hover, &.Mui-active, &.Mui-focusVisible":{boxShadow:"inherit"},"&:before":{display:"none"}},"& .MuiSlider-valueLabel":{"& > *":{background:"linear-gradient(180deg, #604AE5 0%, #813EEE 100%)"},lineHeight:1.2,fontSize:12,padding:0,width:32,height:32,marginLeft:9}}),re=function(e){var t,n,r;if(null===e||void 0===e||!e.lottery.data||null===e||void 0===e||!e.lottery.data.length||null===e||void 0===e||null===(t=e.ticket.data)||void 0===t||!t.seq||null===e||void 0===e||!e.state.phaseThreeStarted)return!1;var a=e.lottery.data[49+Math.floor((null===(n=e.ticket.data)||void 0===n?void 0:n.seq.toNumber())/8)],i=7-(null===(r=e.ticket.data)||void 0===r?void 0:r.seq.toNumber())%8,c=a&Math.pow(2,i);return c>0},ae=function(e){var t,n,r,c,o,s,p,f,g,m,T,E,B,F,V,X,J,Q,ae,ie,ce,oe,se,ue,le,de,be,pe,fe,he,ge,me=Object(i.useState)(0),ve=Object(b.a)(me,2),je=ve[0],xe=ve[1],ye=Object(i.useState)(null),Oe=Object(b.a)(ye,2),ke=Oe[0],Se=Oe[1],we=e.rpcHost,Pe=Object(i.useState)(!1),Te=Object(b.a)(Pe,2),Re=Te[0],Ae=Te[1],Le=Object(i.useState)(0),_e=Object(b.a)(Le,2),Ee=_e[0],Me=_e[1],Ce=Object(K.b)(),Ne=Object(i.useMemo)((function(){if(Ce&&Ce.publicKey&&Ce.signAllTransactions&&Ce.signTransaction)return{publicKey:Ce.publicKey,signAllTransactions:Ce.signAllTransactions,signTransaction:Ce.signTransaction}}),[Ce]),Ke=Object(i.useState)({open:!1,message:"",severity:void 0}),Be=Object(b.a)(Ke,2),De=Be[0],We=Be[1],Ie=Object(i.useState)(),Fe=Object(b.a)(Ie,2),Ye=Fe[0],Ue=Fe[1],Ge=Object(i.useState)(),He=Object(b.a)(Ge,2),Ve=He[0],qe=He[1],ze=Object(i.useState)(!1),Xe=Object(b.a)(ze,2),Je=Xe[0],Qe=Xe[1],Ze=Object(i.useState)(!1),$e=Object(b.a)(Ze,2),et=$e[0],tt=$e[1],nt=function(){var t=Object(d.a)(h.a.mark((function t(){var n,r,a,i,c,o;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,Ae(!0),null===(n=document.getElementById("#identity"))||void 0===n||n.click(),!(Ce.connected&&null!==Ve&&void 0!==Ve&&Ve.program&&Ce.publicKey)){t.next=16;break}if(null===Ye||void 0===Ye||null===(r=Ye.ticket.data)||void 0===r||!r.state.unpunched||!re(Ye)){t.next=7;break}return t.next=7,dt();case 7:return t.next=9,Object(D.d)(Ve,Ce.publicKey);case 9:if(i=t.sent[0],c={err:!0},!i){t.next=15;break}return t.next=14,Object(D.b)(i,e.txTimeout,e.connection,"singleGossip",!0);case 14:c=t.sent;case 15:null!==(a=c)&&void 0!==a&&a.err?We({open:!0,message:"Mint failed! Please try again!",severity:"error"}):We({open:!0,message:"Congratulations! Mint succeeded!",severity:"success"});case 16:t.next=23;break;case 18:t.prev=18,t.t0=t.catch(0),o=t.t0.msg||"Minting failed! Please try again!",t.t0.msg?311===t.t0.code?(o="SOLD OUT!",window.location.reload()):312===t.t0.code&&(o="Minting period hasn't started yet."):t.t0.message?t.t0.message.indexOf("0x138")||(t.t0.message.indexOf("0x137")?o="SOLD OUT!":t.t0.message.indexOf("0x135")&&(o="Insufficient funds to mint. Please fund your wallet.")):o="Transaction Timeout! Please try again.",We({open:!0,message:o,severity:"error"});case 23:return t.prev=23,Ae(!1),t.finish(23);case 26:case"end":return t.stop()}}),t,null,[[0,18,23,26]])})));return function(){return t.apply(this,arguments)}}();Object(i.useEffect)((function(){Object(d.a)(h.a.mark((function t(){var n,r,i,c,o,s;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Ne){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,e.connection.getBalance(Ne.publicKey);case 5:if(n=t.sent,Se(n),!e.fairLaunchId){t.next=31;break}return t.next=10,Object(W.a)(Ne,e.fairLaunchId,e.connection);case 10:if(r=t.sent,Ue(r),t.prev=12,!r.state.tokenMint){t.next=22;break}return t.t0=e.connection,t.next=17,Object(I.e)(r.state.tokenMint,Ne.publicKey);case 17:return t.t1=t.sent[0],t.next=20,t.t0.getTokenAccountBalance.call(t.t0,t.t1);case 20:(i=t.sent).value&&xe(i.value.uiAmount||0);case 22:t.next=28;break;case 24:t.prev=24,t.t2=t.catch(12),console.log("Problem getting fair launch token balance"),console.log(t.t2);case 28:0===Ee&&(z(r,void 0)===a.SetPrice?(c=(r.state.data.priceRangeEnd.toNumber()-r.state.data.priceRangeStart.toNumber())/r.state.data.tickSize.toNumber(),o=Math.round(Math.random()*c),Me((r.state.data.priceRangeStart.toNumber()+o*r.state.data.tickSize.toNumber())/N.LAMPORTS_PER_SOL)):Me((r.state.currentMedian||r.state.data.priceRangeStart).toNumber()/N.LAMPORTS_PER_SOL)),t.next=32;break;case 31:console.log("No fair launch detected in configuration.");case 32:t.next=38;break;case 34:t.prev=34,t.t3=t.catch(2),console.log("Problem getting fair launch state"),console.log(t.t3);case 38:if(!e.candyMachineId){t.next=52;break}return t.prev=39,t.next=42,Object(D.c)(Ne,e.candyMachineId,e.connection);case 42:s=t.sent,qe(s),t.next=50;break;case 46:t.prev=46,t.t4=t.catch(39),console.log("Problem getting candy machine state"),console.log(t.t4);case 50:t.next=53;break;case 52:console.log("No candy machine detected in configuration.");case 53:case"end":return t.stop()}}),t,null,[[2,34],[12,24],[39,46]])})))()}),[Ne,e.candyMachineId,e.connection,e.fairLaunchId,Ee]);var rt=I.d.asNumber(null===Ye||void 0===Ye?void 0:Ye.state.data.priceRangeStart),at=I.d.asNumber(null===Ye||void 0===Ye?void 0:Ye.state.data.priceRangeEnd),it=I.d.asNumber(null===Ye||void 0===Ye?void 0:Ye.state.data.tickSize),ct=I.d.asNumber(null===Ye||void 0===Ye?void 0:Ye.state.currentMedian),ot=z(Ye,Ve);console.log("Phase",ot);var st=[{value:rt||0,label:"".concat(rt," SOL")}].concat(Object(l.a)(ot===a.SetPrice?[]:[{value:ct||0,label:"".concat(ct)}]),[{value:at||0,label:"".concat(at," SOL")}]).filter((function(e){return void 0!==e&&0!==e.value})),ut=function(){var e=Object(d.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ne){e.next=2;break}return e.abrupt("return");case 2:return console.log("deposit"),Ae(!0),e.prev=4,e.next=7,Object(W.c)(Ee,Ne,Ye);case 7:Ae(!1),We({open:!0,message:"Congratulations! Bid ".concat(null!==Ye&&void 0!==Ye&&Ye.ticket.data?"updated":"inserted","!"),severity:"success"}),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(4),console.log(e.t0),Ae(!1),We({open:!0,message:"Something went wrong.",severity:"error"});case 16:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(){return e.apply(this,arguments)}}(),lt=function(){var e=Object(d.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ne){e.next=2;break}return e.abrupt("return");case 2:return console.log("refund"),e.prev=3,Ae(!0),e.next=7,Object(W.c)(0,Ne,Ye);case 7:Ae(!1),We({open:!0,message:"Congratulations! Funds withdrawn. This is an irreversible action.",severity:"success"}),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(3),console.log(e.t0),Ae(!1),We({open:!0,message:"Something went wrong.",severity:"error"});case 16:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(){return e.apply(this,arguments)}}(),dt=(Object(R.a)(),function(){var e=Object(d.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ne&&Ye&&Ye.ticket){e.next=2;break}return e.abrupt("return");case 2:return console.log("punch"),Ae(!0),e.prev=4,e.next=7,Object(W.b)(Ne,Ye);case 7:Ae(!1),We({open:!0,message:"Congratulations! Ticket punched!",severity:"success"}),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(4),console.log(e.t0),Ae(!1),We({open:!0,message:"Something went wrong.",severity:"error"});case 16:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(){return e.apply(this,arguments)}}()),bt=(null===Ve||void 0===Ve?void 0:Ve.state.goLiveDate)&&(null===Ye||void 0===Ye?void 0:Ye.state.data.phaseTwoEnd)&&(null===Ve||void 0===Ve?void 0:Ve.state.goLiveDate.lt(null===Ye||void 0===Ye?void 0:Ye.state.data.phaseTwoEnd)),pt=!!(null!=ke&&null!==Ye&&void 0!==Ye&&Ye.state.data.priceRangeStart&&null!==Ye&&void 0!==Ye&&Ye.state.data.fee&&ke+((null===Ye||void 0===Ye||null===(t=Ye.ticket)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.amount.toNumber())||0)<Ee*N.LAMPORTS_PER_SOL+(null===Ye||void 0===Ye?void 0:Ye.state.data.fee.toNumber())+.01);return Object(U.jsxs)(v.a,{style:{marginTop:10},children:[Ye&&Object(U.jsx)(q,{fairLaunch:Ye,isMinting:[Re,Ae],setAlertState:We}),Object(U.jsxs)(P.a,{container:!0,justifyContent:"center",children:[Object(U.jsxs)(P.a,{sm:12,md:4,justifyContent:"center",direction:"column",children:[Object(U.jsx)(j.a,{style:{paddingTop:30,paddingBottom:30},sx:{display:{xs:"none",md:"block"}},children:Object(U.jsx)("img",{src:"mint_01.png",alt:"Official Logo",style:{display:"block",marginLeft:"auto",marginRight:"auto"}})}),Object(U.jsx)(j.a,{style:{paddingBottom:30},sx:{display:{xs:"none",md:"block"}},children:Object(U.jsx)("img",{src:"mint_04.gif",alt:"Desktop Wallet",style:{display:"block",marginLeft:"auto",marginRight:"auto"}})}),Object(U.jsx)(j.a,{style:{paddingBottom:30},sx:{display:{xs:"none",md:"none"}},children:Object(U.jsx)("img",{src:"mint_07.gif",alt:"Mobile Wallet",style:{display:"block",marginLeft:"auto",marginRight:"auto"}})})]}),Object(U.jsxs)(P.a,{sm:12,md:4,justifyContent:"center",direction:"column",children:[Object(U.jsx)(j.a,{style:{paddingTop:30,paddingBottom:30},sx:{display:{sm:"block",md:"none",lg:"none",xl:"none"}},children:Object(U.jsx)("img",{src:"mint_01.png",alt:"Official Logo",style:{display:"block",marginLeft:"auto",marginRight:"auto"}})}),Object(U.jsx)(j.a,{style:{paddingBottom:30},sx:{display:{xl:"block"}},children:Object(U.jsx)("img",{src:"mint_02.gif",alt:"Battle Pups Logo",style:{display:"block",marginLeft:"auto",marginRight:"auto"}})}),Object(U.jsx)(v.a,{maxWidth:"xs",style:{position:"relative"},children:Object(U.jsx)(S.a,{style:{padding:24,backgroundColor:"#151A1F",borderRadius:6},children:Object(U.jsxs)(P.a,{container:!0,justifyContent:"center",direction:"column",children:[Object(U.jsx)(Z,{phase:ot,fairLaunch:Ye,candyMachine:Ve,rpcUrl:we,candyMachinePredatesFairLaunch:!!bt}),Ye&&Object(U.jsx)(P.a,{container:!0,direction:"column",justifyContent:"center",alignItems:"center",style:{height:200,marginTop:20,marginBottom:20,background:"#384457",borderRadius:6},children:Ye.ticket.data?Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(w.a,{children:"Your bid"}),Object(U.jsxs)(w.a,{variant:"h6",style:{fontWeight:900},children:[I.d.format(((null===Ye||void 0===Ye||null===(r=Ye.ticket.data)||void 0===r?void 0:r.amount.toNumber())||0)/N.LAMPORTS_PER_SOL)," ","SOL"]})]}):[a.AnticipationPhase,a.SetPrice].includes(ot)?Object(U.jsxs)(w.a,{children:["You haven't entered this raffle yet. ",Object(U.jsx)("br",{}),(null===Ye||void 0===Ye||null===(c=Ye.state)||void 0===c||null===(o=c.data)||void 0===o?void 0:o.fee)&&Object(U.jsx)("span",{children:Object(U.jsxs)("b",{children:["All initial bids will incur a \u25ce"," ",(null===Ye||void 0===Ye||null===(s=Ye.state)||void 0===s||null===(p=s.data)||void 0===p?void 0:p.fee.toNumber())/N.LAMPORTS_PER_SOL," ","fee."]})})]}):Object(U.jsx)(w.a,{children:"You didn't participate in this raffle."})}),Ye&&Object(U.jsxs)(U.Fragment,{children:[[a.SetPrice,a.GracePeriod,a.RaffleFinished,a.Lottery].includes(ot)&&(null===Ye||void 0===Ye||null===(f=Ye.ticket)||void 0===f||null===(g=f.data)||void 0===g?void 0:g.state.withdrawn)&&Object(U.jsx)("div",{style:{paddingTop:"15px"},children:Object(U.jsx)(C.a,{severity:"error",children:"Your bid was withdrawn and cannot be adjusted or re-inserted."})}),[a.GracePeriod].includes(ot)&&Ye.state.currentMedian&&(null===Ye||void 0===Ye||null===(m=Ye.ticket)||void 0===m||null===(T=m.data)||void 0===T?void 0:T.amount)&&!(null!==Ye&&void 0!==Ye&&null!==(E=Ye.ticket)&&void 0!==E&&null!==(B=E.data)&&void 0!==B&&B.state.withdrawn)&&Ye.state.currentMedian.gt(null===Ye||void 0===Ye||null===(F=Ye.ticket)||void 0===F||null===(V=F.data)||void 0===V?void 0:V.amount)&&Object(U.jsx)("div",{style:{paddingTop:"15px"},children:Object(U.jsx)(C.a,{severity:"warning",children:"Your bid is currently below the median and will not be eligible for the raffle."})}),[a.RaffleFinished,a.Lottery].includes(ot)&&Ye.state.currentMedian&&(null===Ye||void 0===Ye||null===(X=Ye.ticket)||void 0===X||null===(J=X.data)||void 0===J?void 0:J.amount)&&!(null!==Ye&&void 0!==Ye&&null!==(Q=Ye.ticket)&&void 0!==Q&&null!==(ae=Q.data)&&void 0!==ae&&ae.state.withdrawn)&&Ye.state.currentMedian.gt(null===Ye||void 0===Ye||null===(ie=Ye.ticket)||void 0===ie||null===(ce=ie.data)||void 0===ce?void 0:ce.amount)&&Object(U.jsx)("div",{style:{paddingTop:"15px"},children:Object(U.jsxs)(C.a,{severity:"error",children:["Your bid was below the median and was not included in the raffle. You may click ",Object(U.jsx)("em",{children:"Withdraw"})," when the raffle ends or you will be automatically issued one when the Fair Launch authority withdraws from the treasury."]})}),pt&&Object(U.jsx)(C.a,{severity:"error",children:"You do not have enough SOL in your account to place this bid."})]}),[a.SetPrice,a.GracePeriod].includes(ot)&&Object(U.jsx)(U.Fragment,{children:Object(U.jsx)(P.a,{style:{marginTop:40,marginBottom:20},children:Ee>0?Object(U.jsx)(ne,{min:rt,marks:st,max:at,step:it,value:Ee,onChange:function(e,t){return Me(t)},valueLabelDisplay:"auto",style:{width:"calc(100% - 40px)",marginLeft:20,height:30}}):Object(U.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:Object(U.jsx)(x.a,{})})})}),Ce.connected?Object(U.jsxs)("div",{children:[[a.SetPrice,a.GracePeriod].includes(ot)&&Object(U.jsx)(U.Fragment,{children:Object(U.jsx)(G,{onClick:ut,variant:"contained",disabled:Re||!(null!==Ye&&void 0!==Ye&&Ye.ticket.data)&&ot===a.GracePeriod||pt,children:Re?Object(U.jsx)(x.a,{}):null!==Ye&&void 0!==Ye&&Ye.ticket.data?"Change bid":"Place bid"})}),[a.RaffleFinished].includes(ot)&&Object(U.jsxs)(U.Fragment,{children:[re(Ye)&&Object(U.jsx)(G,{onClick:dt,variant:"contained",disabled:void 0!==(null===Ye||void 0===Ye||null===(oe=Ye.ticket.data)||void 0===oe?void 0:oe.state.punched),children:Re?Object(U.jsx)(x.a,{}):"Punch Ticket"}),!re(Ye)&&Object(U.jsx)(G,{onClick:lt,variant:"contained",disabled:Re||void 0===(null===Ye||void 0===Ye?void 0:Ye.ticket.data)||void 0!==(null===Ye||void 0===Ye||null===(se=Ye.ticket.data)||void 0===se?void 0:se.state.withdrawn),children:Re?Object(U.jsx)(x.a,{}):"Withdraw"})]}),ot===a.Phase4&&Object(U.jsxs)(U.Fragment,{children:[(!Ye||re(Ye)||je>0)&&Object(U.jsx)(ee,{children:null!==Ve&&void 0!==Ve&&Ve.state.isActive&&null!==Ve&&void 0!==Ve&&Ve.state.gatekeeper&&Ce.publicKey&&Ce.signTransaction?Object(U.jsx)(Y.a,{wallet:{publicKey:Ce.publicKey||new N.PublicKey(D.a),signTransaction:Ce.signTransaction},gatekeeperNetwork:null===Ve||void 0===Ve||null===(ue=Ve.state)||void 0===ue||null===(le=ue.gatekeeper)||void 0===le?void 0:le.gatekeeperNetwork,clusterUrl:we,options:{autoShowModal:!1},children:Object(U.jsx)(H,{candyMachine:Ve,fairLaunch:Ye,isMinting:Re,fairLaunchBalance:je,onMint:nt})}):Object(U.jsx)(H,{candyMachine:Ve,fairLaunch:Ye,isMinting:Re,fairLaunchBalance:je,onMint:nt})}),!(!Ye||re(Ye)||je>0)&&Object(U.jsx)(G,{onClick:lt,variant:"contained",disabled:Re||void 0===(null===Ye||void 0===Ye?void 0:Ye.ticket.data)||void 0!==(null===Ye||void 0===Ye||null===(de=Ye.ticket.data)||void 0===de?void 0:de.state.withdrawn),children:Re?Object(U.jsx)(x.a,{}):"Withdraw"})]})]}):Object(U.jsxs)($,{children:["Connect"," ",[a.SetPrice].includes(ot)?"to bid":"to reserve"]}),Object(U.jsxs)(P.a,{container:!0,justifyContent:"space-between",color:"textSecondary",children:[Ye&&Object(U.jsx)(y.a,{component:"button",variant:"body2",color:"textSecondary",align:"left",onClick:function(){Qe(!0)},children:"How this raffle works"}),(null===Ye||void 0===Ye?void 0:Ye.ticket.data)&&Object(U.jsx)(y.a,{component:"button",variant:"body2",color:"textSecondary",align:"right",onClick:function(){!Ye||ot===a.Lottery||re(Ye)||je>0?tt(!0):lt()},children:"Withdraw funds"})]}),Object(U.jsx)(A.a,{open:et,onClose:function(){return tt(!1)},PaperProps:{style:{backgroundColor:"#222933",borderRadius:6}},children:Object(U.jsx)(_.a,{style:{padding:24},children:"During raffle phases, or if you are a winner, or if this website is not configured to be a fair launch but simply a candy machine, refunds are disallowed."})}),Object(U.jsxs)(A.a,{open:Je,onClose:function(){return Qe(!1)},PaperProps:{style:{backgroundColor:"#222933",borderRadius:6}},children:[Object(U.jsxs)(L.a,{disableTypography:!0,style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[Object(U.jsx)(y.a,{component:"button",variant:"h6",color:"textSecondary",onClick:function(){Qe(!0)},children:"How it works"}),Object(U.jsx)(O.a,{"aria-label":"close",className:te.closeButton,onClick:function(){return Qe(!1)},children:Object(U.jsx)(M.a,{})})]}),Object(U.jsxs)(_.a,{children:[Object(U.jsx)(w.a,{variant:"h6",children:"Phase 1 - Set the fair price:"}),Object(U.jsxs)(w.a,{gutterBottom:!0,color:"textSecondary",children:['Enter a bid in the range provided by the artist. The median of all bids will be the "fair" price of the raffle ticket.'," ",(null===Ye||void 0===Ye||null===(be=Ye.state)||void 0===be||null===(pe=be.data)||void 0===pe?void 0:pe.fee)&&Object(U.jsx)("span",{children:Object(U.jsxs)("b",{children:["All bids will incur a \u25ce"," ",(null===Ye||void 0===Ye||null===(fe=Ye.state)||void 0===fe||null===(he=fe.data)||void 0===he?void 0:he.fee.toNumber())/N.LAMPORTS_PER_SOL," ","fee."]})})]}),Object(U.jsx)(w.a,{variant:"h6",children:"Phase 2 - Grace period:"}),Object(U.jsx)(w.a,{gutterBottom:!0,color:"textSecondary",children:"If your bid was at or above the fair price, you automatically get a raffle ticket at that price. There's nothing else you need to do. Your excess SOL will be returned to you when the Fair Launch authority withdraws from the treasury. If your bid is below the median price, you can still opt in at the fair price during this phase."}),bt?Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(w.a,{variant:"h6",children:"Phase 3 - The Candy Machine:"}),Object(U.jsx)(w.a,{gutterBottom:!0,color:"textSecondary",children:"Everyone who got a raffle ticket at the fair price is entered to win an NFT. If you win an NFT, congrats. If you don\u2019t, no worries, your SOL will go right back into your wallet."})]}):Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(w.a,{variant:"h6",children:"Phase 3 - The Lottery:"}),Object(U.jsx)(w.a,{gutterBottom:!0,color:"textSecondary",children:"Everyone who got a raffle ticket at the fair price is entered to win a Fair Launch Token that entitles them to an NFT at a later date using a Candy Machine here. If you don\u2019t win, no worries, your SOL will go right back into your wallet."}),Object(U.jsx)(w.a,{variant:"h6",children:"Phase 4 - The Candy Machine:"}),Object(U.jsxs)(w.a,{gutterBottom:!0,color:"textSecondary",children:["On"," ",null!==Ve&&void 0!==Ve&&Ve.state.goLiveDate?null===(ge=Object(I.i)(null===Ve||void 0===Ve?void 0:Ve.state.goLiveDate))||void 0===ge?void 0:ge.toLocaleString():" some later date",", you will be able to exchange your Fair Launch token for an NFT using the Candy Machine at this site by pressing the Mint Button."]})]})]})]})]})})}),Object(U.jsx)(j.a,{style:{paddingTop:30,paddingBottom:30},sx:{display:{sm:"block",md:"none",lg:"none",xl:"none"}},children:Object(U.jsx)("img",{src:"mint_06.png",alt:"How To Mint",style:{display:"block",marginLeft:"auto",marginRight:"auto"}})}),Object(U.jsx)(j.a,{style:{paddingBottom:30},sx:{display:{sm:"block",md:"none",lg:"none",xl:"none"}},children:Object(U.jsx)("img",{src:"mint_09.gif",alt:"What Do You Get",style:{display:"block",marginLeft:"auto",marginRight:"auto"}})}),Object(U.jsx)(j.a,{style:{paddingBottom:30},sx:{display:{sm:"block",md:"none",lg:"none",xl:"none"}},children:Object(U.jsx)("img",{src:"mint_04.gif",alt:"Desktop Wallet",style:{display:"block",marginLeft:"auto",marginRight:"auto"}})}),Object(U.jsx)(j.a,{style:{paddingBottom:30},sx:{display:{sm:"none",md:"none",lg:"none",xl:"none"}},children:Object(U.jsx)("img",{src:"mint_07.gif",alt:"Mobile Wallet",style:{display:"block",marginLeft:"auto",marginRight:"auto"}})}),Object(U.jsx)(j.a,{style:{paddingTop:30,paddingBottom:30},children:Object(U.jsx)("img",{src:"mint_08.gif",alt:"NFT Example",style:{display:"block",marginLeft:"auto",marginRight:"auto"}})})]}),Object(U.jsxs)(P.a,{sm:12,md:4,justifyContent:"center",direction:"column",children:[Object(U.jsx)(j.a,{style:{paddingTop:30,paddingBottom:30},sx:{display:{xs:"none",md:"block"}},children:Object(U.jsx)("img",{src:"mint_03.gif",alt:"Start Here",style:{display:"block",marginLeft:"auto",marginRight:"auto"}})}),Object(U.jsx)(j.a,{style:{paddingBottom:30},sx:{display:{xs:"none",md:"block"}},children:Object(U.jsx)("img",{src:"mint_06.png",alt:"How To Mint",style:{display:"block",marginLeft:"auto",marginRight:"auto"}})}),Object(U.jsx)(j.a,{style:{paddingBottom:30},sx:{display:{xs:"none",md:"block"}},children:Object(U.jsx)("img",{src:"mint_09.gif",alt:"What Do You Get",style:{display:"block",marginLeft:"auto",marginRight:"auto"}})})]})]}),Ye&&Object(U.jsx)(v.a,{maxWidth:"xs",style:{position:"relative",marginTop:10},children:Object(U.jsx)("div",{style:{margin:20},children:Object(U.jsxs)(P.a,{container:!0,direction:"row",wrap:"nowrap",children:[Object(U.jsxs)(P.a,{container:!0,md:4,direction:"column",children:[Object(U.jsx)(w.a,{variant:"body2",color:"textSecondary",children:"Bids"}),Object(U.jsx)(w.a,{variant:"h6",color:"textPrimary",style:{fontWeight:"bold"},children:(null===Ye||void 0===Ye?void 0:Ye.state.numberTicketsSold.toNumber())||0})]}),Object(U.jsxs)(P.a,{container:!0,md:4,direction:"column",children:[Object(U.jsx)(w.a,{variant:"body2",color:"textSecondary",children:"Median bid"}),Object(U.jsxs)(w.a,{variant:"h6",color:"textPrimary",style:{fontWeight:"bold"},children:["\u25ce"," ",ot===a.AnticipationPhase||ot===a.SetPrice?"???":I.d.format(ct)]})]}),Object(U.jsxs)(P.a,{container:!0,md:4,direction:"column",children:[Object(U.jsx)(w.a,{variant:"body2",color:"textSecondary",children:"Total raised"}),Object(U.jsxs)(w.a,{variant:"h6",color:"textPrimary",style:{fontWeight:"bold"},children:["\u25ce"," ",I.d.format(((null===Ye||void 0===Ye?void 0:Ye.treasury)||0)/N.LAMPORTS_PER_SOL)]})]})]})})}),Object(U.jsx)(k.a,{open:De.open,autoHideDuration:6e3,onClose:function(){return We(Object(u.a)(Object(u.a)({},De),{},{open:!1}))},children:Object(U.jsx)(C.a,{onClose:function(){return We(Object(u.a)(Object(u.a)({},De),{},{open:!1}))},severity:De.severity,children:De.message})})]})},ie=n(21),ce=n(322),oe=n(327),se=n(325),ue=n(195),le=n(319),de=n(194),be=c.a.createContext(null),pe=function(e){var t=e.children,n=void 0===t?null:t,r=Object(i.useRef)(),a=Object(i.useRef)(),c=Object(i.useMemo)((function(){return function(){var e;a.current&&r.current&&(r.current.style.visibility="visible",null===(e=a.current({particleCount:400,spread:160,origin:{y:.3}}))||void 0===e||e.finally((function(){r.current&&(r.current.style.visibility="hidden")})))}}),[]);Object(i.useEffect)((function(){r.current&&!a.current&&(r.current.style.visibility="hidden",a.current=de.a.create(r.current,{resize:!0,useWorker:!0}))}),[]);return Object(U.jsxs)(be.Provider,{value:{dropConfetti:c},children:[Object(U.jsx)("canvas",{ref:r,style:{width:"100vw",height:"100vh",position:"absolute",zIndex:1,top:0,left:0}}),n]})},fe=Object(ue.a)({palette:{type:"dark"}}),he=new ie.e.PublicKey("8q3yGVxxu1LG6u4X2BGwjQRtE7qyoXJfzxCzaqexzfh2"),ge=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_CANDY_MACHINE_ID:"8q3yGVxxu1LG6u4X2BGwjQRtE7qyoXJfzxCzaqexzfh2",REACT_APP_SOLANA_NETWORK:"devnet",REACT_APP_SOLANA_RPC_HOST:"https://api.devnet.solana.com"}).REACT_APP_FAIR_LAUNCH_ID?new ie.e.PublicKey(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_CANDY_MACHINE_ID:"8q3yGVxxu1LG6u4X2BGwjQRtE7qyoXJfzxCzaqexzfh2",REACT_APP_SOLANA_NETWORK:"devnet",REACT_APP_SOLANA_RPC_HOST:"https://api.devnet.solana.com"}).REACT_APP_FAIR_LAUNCH_ID):void 0,me="https://api.devnet.solana.com",ve=new ie.e.Connection(me),je=parseInt(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_CANDY_MACHINE_ID:"8q3yGVxxu1LG6u4X2BGwjQRtE7qyoXJfzxCzaqexzfh2",REACT_APP_SOLANA_NETWORK:"devnet",REACT_APP_SOLANA_RPC_HOST:"https://api.devnet.solana.com"}).REACT_APP_CANDY_START_DATE,10),xe=function(){var e=Object(i.useMemo)((function(){return Object(N.clusterApiUrl)("devnet")}),[]),t=Object(i.useMemo)((function(){return[Object(ce.a)()]}),[]);return Object(U.jsx)(le.a,{theme:fe,children:Object(U.jsx)(oe.a,{endpoint:e,children:Object(U.jsx)(se.a,{wallets:t,autoConnect:!0,children:Object(U.jsx)(B.b,{children:Object(U.jsx)(pe,{children:Object(U.jsx)(ae,{candyMachineId:he,fairLaunchId:ge,connection:ve,startDate:je,txTimeout:3e4,rpcHost:me})})})})})})},ye=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,332)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),i(e),c(e)}))};s.a.render(Object(U.jsx)(c.a.StrictMode,{children:Object(U.jsx)(xe,{})}),document.getElementById("root")),ye()},94:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return h})),n.d(t,"d",(function(){return j})),n.d(t,"c",(function(){return x}));var r,a=n(17),i=n(13),c=n(4),o=n(1),s=n.n(o),u=n(21),l=n(29),d=n(7),b=n(25),p=new u.e.PublicKey("faircnAB9k59Y4TXmLabBULeuTLgV7TkGMGNkjnA15j");!function(e){e.Brewing="Brewing",e.Finished="Finished",e.PastDue="Past Due"}(r||(r={}));var f=function(){var e=Object(c.a)(s.a.mark((function e(t,n,r){var a,c,o,l,d,b,f,h,v,j,x,y,O;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new u.c(r,t,{preflightCommitment:"recent"}),e.next=3,u.b.fetchIdl(p,a);case 3:return c=e.sent,o=new u.b(c,p,a),e.next=7,o.account.fairLaunch.fetch(n);case 7:return l=e.sent,e.next=10,g(l.tokenMint,t.publicKey);case 10:return d=e.sent,b=Object(i.a)(d,2),f=b[0],h=b[1],e.prev=14,e.next=17,o.account.fairLaunchTicket.fetch(f);case 17:v=e.sent,e.next=23;break;case 20:e.prev=20,e.t0=e.catch(14),console.log("No ticket");case 23:return e.next=25,o.provider.connection.getBalance(l.treasury);case 25:return j=e.sent,x=new Uint8Array([]),e.next=29,m(l.tokenMint);case 29:return y=e.sent[0],e.prev=30,e.next=33,o.provider.connection.getAccountInfo(y);case 33:O=e.sent,x=new Uint8Array((null===O||void 0===O?void 0:O.data)||[]),e.next=41;break;case 37:e.prev=37,e.t1=e.catch(30),console.log("Could not find fair launch lottery."),console.log(e.t1);case 41:return e.abrupt("return",{id:n,state:l,program:o,ticket:{pubkey:f,bump:h,data:v},lottery:{pubkey:y,data:x},treasury:j});case 42:case"end":return e.stop()}}),e,null,[[14,20],[30,37]])})));return function(t,n,r){return e.apply(this,arguments)}}(),h=function(){var e=Object(c.a)(s.a.mark((function e(t,n){var r,i,c,o,d,p,f,h,j,x;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(n.state.tokenMint,t.publicKey);case 2:return r=e.sent[0],i=n.ticket.data,e.next=6,m(n.state.tokenMint);case 6:return c=e.sent[0],e.next=9,Object(b.e)(n.state.tokenMint,t.publicKey);case 9:if(o=e.sent[0],null===i||void 0===i||!i.amount.gt(n.state.currentMedian)){e.next=20;break}return console.log("Adjusting down...",null===i||void 0===i?void 0:i.amount.toNumber(),n.state.currentMedian.toNumber()),e.next=14,v(n.program,n.state.currentMedian.toNumber(),t,n,r);case 14:return d=e.sent,p=d.remainingAccounts,f=d.instructions,h=d.signers,e.next=20,n.program.rpc.adjustTicket(n.state.currentMedian,{accounts:{fairLaunchTicket:r,fairLaunch:n.id,fairLaunchLotteryBitmap:c,treasury:n.state.treasury,systemProgram:u.e.SystemProgram.programId,clock:u.e.SYSVAR_CLOCK_PUBKEY},__private:{logAccounts:!0},instructions:f.length>0?f:void 0,remainingAccounts:[{pubkey:t.publicKey,isSigner:!0,isWritable:!0}].concat(Object(a.a)(p)),signers:h});case 20:return e.next=22,n.program.provider.connection.getAccountInfo(o);case 22:return j=e.sent,x=j?[]:[Object(b.c)(o,t.publicKey,t.publicKey,n.state.tokenMint)],e.next=26,n.program.rpc.punchTicket({accounts:{fairLaunchTicket:r,fairLaunch:n.id,fairLaunchLotteryBitmap:c,payer:t.publicKey,buyerTokenAccount:o,tokenMint:n.state.tokenMint,tokenProgram:l.b},instructions:x.length>0?x:void 0});case 26:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),g=function(){var t=Object(c.a)(s.a.mark((function t(n,r){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.e.PublicKey.findProgramAddress([e.from("fair_launch"),n.toBuffer(),r.toBuffer()],p);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),m=function(){var t=Object(c.a)(s.a.mark((function t(n){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.e.PublicKey.findProgramAddress([e.from("fair_launch"),n.toBuffer(),e.from("lottery")],p);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),v=function(){var e=Object(c.a)(s.a.mark((function e(t,n,r,a,c){var o,p,f,h,g,m,v,j,x,y,O;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=2;break}return e.abrupt("return",{remainingAccounts:[],instructions:[],signers:[],amountLamports:0});case 2:if(o=a.ticket,p=[],f=[],h=[],g=0,a.state.treasuryMint){e.next=11;break}g=o||0!==n?Math.ceil(n*d.LAMPORTS_PER_SOL):a.state.data.priceRangeStart.toNumber(),e.next=23;break;case 11:return m=u.e.Keypair.generate(),h.push(m),f.push(l.c.createApproveInstruction(l.b,a.state.treasuryMint,m.publicKey,r.publicKey,[],amountNumber+a.state.data.fees.toNumber())),p.push({pubkey:a.state.treasuryMint,isWritable:!0,isSigner:!1}),e.t0=p,e.next=18,Object(b.e)(a.state.treasuryMint,r.publicKey);case 18:e.t1=e.sent[0],e.t2={pubkey:e.t1,isWritable:!0,isSigner:!1},e.t0.push.call(e.t0,e.t2),p.push({pubkey:m.publicKey,isWritable:!1,isSigner:!0}),p.push({pubkey:l.b,isWritable:!1,isSigner:!1});case 23:if(!o.data){e.next=39;break}return e.next=26,Object(b.f)(a.state.tokenMint,null===(v=o.data)||void 0===v?void 0:v.seq);case 26:return j=e.sent,x=Object(i.a)(j,2),y=x[0],O=x[1],e.next=32,t.provider.connection.getAccountInfo(y);case 32:if(e.sent){e.next=39;break}return e.t3=f,e.next=37,t.instruction.createTicketSeq(O,{accounts:{fairLaunchTicketSeqLookup:y,fairLaunch:a.id,fairLaunchTicket:c,payer:r.publicKey,systemProgram:u.e.SystemProgram.programId,rent:u.e.SYSVAR_RENT_PUBKEY},signers:[]});case 37:e.t4=e.sent,e.t3.push.call(e.t3,e.t4);case 39:return e.abrupt("return",{remainingAccounts:p,instructions:f,signers:h,amountLamports:g});case 40:case"end":return e.stop()}}),e)})));return function(t,n,r,a,i){return e.apply(this,arguments)}}(),j=function(){var e=Object(c.a)(s.a.mark((function e(t,n){var r,a,i,c,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Object(b.e)(n.state.tokenMint,t.publicKey);case 4:if(r=e.sent[0],a=u.e.Keypair.generate(),i=[a],c=[l.c.createApproveInstruction(l.b,r,a.publicKey,t.publicKey,[],1)],o=[],!n.state.treasuryMint){e.next=17;break}return o.push({pubkey:n.state.treasuryMint,isWritable:!0,isSigner:!1}),e.t0=o,e.next=14,Object(b.e)(n.state.treasuryMint,t.publicKey);case 14:e.t1=e.sent[0],e.t2={pubkey:e.t1,isWritable:!0,isSigner:!1},e.t0.push.call(e.t0,e.t2);case 17:return console.log("tfr",n.state.treasury.toBase58(),t.publicKey.toBase58(),r.toBase58()),e.next=20,n.program.rpc.receiveRefund({accounts:{fairLaunch:n.id,treasury:n.state.treasury,buyer:t.publicKey,buyerTokenAccount:r,transferAuthority:a.publicKey,tokenMint:n.state.tokenMint,tokenProgram:l.b,systemProgram:u.e.SystemProgram.programId,clock:u.e.SYSVAR_CLOCK_PUBKEY},__private:{logAccounts:!0},remainingAccounts:o,instructions:c,signers:i});case 20:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),x=function(){var e=Object(c.a)(s.a.mark((function e(t,n,r){var c,o,l,d,b,p,f,h,j,x,y;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return");case 2:return c=r.ticket.data,e.next=5,g(r.state.tokenMint,n.publicKey);case 5:return o=e.sent,l=Object(i.a)(o,2),d=l[0],b=l[1],e.next=11,v(r.program,t,n,r,d);case 11:if(p=e.sent,f=p.remainingAccounts,h=p.instructions,j=p.signers,x=p.amountLamports,!c){e.next=24;break}return e.next=19,m(r.state.tokenMint);case 19:return y=e.sent[0],console.log("Anchor wallet",n.publicKey.toBase58(),x),e.next=23,r.program.rpc.adjustTicket(new u.a(x),{accounts:{fairLaunchTicket:d,fairLaunch:r.id,fairLaunchLotteryBitmap:y,treasury:r.state.treasury,systemProgram:u.e.SystemProgram.programId,clock:u.e.SYSVAR_CLOCK_PUBKEY},__private:{logAccounts:!0},remainingAccounts:[{pubkey:n.publicKey,isSigner:!0,isWritable:!0}].concat(Object(a.a)(f)),signers:j,instructions:h.length>0?h:void 0});case 23:return e.abrupt("return");case 24:return e.prev=24,console.log("Amount",x),e.next=28,r.program.rpc.purchaseTicket(b,new u.a(x),{accounts:{fairLaunchTicket:d,fairLaunch:r.id,treasury:r.state.treasury,buyer:n.publicKey,payer:n.publicKey,systemProgram:u.e.SystemProgram.programId,rent:u.e.SYSVAR_RENT_PUBKEY,clock:u.e.SYSVAR_CLOCK_PUBKEY},remainingAccounts:f,signers:j,instructions:h.length>0?h:void 0});case 28:e.next=34;break;case 30:throw e.prev=30,e.t0=e.catch(24),console.log(e.t0),e.t0;case 34:case"end":return e.stop()}}),e,null,[[24,30]])})));return function(t,n,r){return e.apply(this,arguments)}}()}).call(this,n(15).Buffer)}},[[282,1,2]]]);
//# sourceMappingURL=main.21a14b8a.chunk.js.map